<!DOCTYPE html>
<html lang="en">
    <head>
        <%-include ('../partials/head') %>
        <link rel="stylesheet" href="/css/formularios.css">
      </head>
 
<body>

    
    <%-include ('../partials/header') %>

    <main class="create">


        <div>
        <form class="formulario" action="/producto/"  method="POST" enctype="multipart/form-data">
            <h1 class="products-title">Formulario de creación </h1>
            <div class="divName">
            <input type="text" name="name" id="name" class="normal" placeholder="Nombre del producto" <%= locals.errors && errors.name ? 'is-invalid' : null %>
            value="<%= locals.oldData ? oldData.name : null %>"
        > <i class="far fa-check-circle" id="checkName"></i>
        <i class="far fa-times-circle" id="checkError"></i></div>
        <ul id="ul" class="error"></ul>
        <% if (locals.errors && errors.name) { %>
            <div class="text-danger">
                <%= errors.name.msg %> 
            </div>
        <% } %>
        <div class="divPrice">
            <input type="text" name="price" id="price" class="normal" placeholder="Precio del producto" <%= locals.errors && errors.price ? 'is-invalid' : null %>
            value="<%= locals.oldData ? oldData.price : null %>"
        >
        <i class="far fa-check-circle" id="checkPrice"></i>
        <i class="far fa-times-circle" id="checkPriceError"></i></div>
        <ul id="ulPrice" class="error"></ul>
        <% if (locals.errors && errors.price) { %>
            <div class="text-danger">
                <%= errors.price.msg %> 
            </div>
        <% } %>
        <select name="color_id" id="color" required class="normal">
            <option value="" disabled selected>- Seleccione el color - </option>
            <% allColor.forEach(color => { %>
            <option value="<%= color.id %>"><%= color.name %></option>
            <% }); %>
        </select>
        <div class="divAccessory">
            <input type="text" name="accessory" id="accessory" class="normal" placeholder="Accesorios del producto" <%= locals.errors && errors.accessory ? 'is-invalid' : null %>
            value="<%= locals.oldData ? oldData.accessory : null %>"
        >
        <i class="far fa-check-circle" id="checkAccessory"></i>
        <i class="far fa-times-circle" id="checkAccessoryError"></i></div>
        <ul id="ulAccessory" class="error"></ul>
        <% if (locals.errors && errors.accessory) { %>
            <div class="text-danger">
                <%= errors.accessory.msg %> 
            </div>
        <% } %>
        <select name="brand_id" id="brand" required class="normal">
            <option value="" disabled selected>- Seleccione la marca - </option>
            <% allBrand.forEach(brand => { %>
            <option value="<%= brand.id %>"><%= brand.name %></option>
            <% }); %>
        </select>

        
            <input type="text" name="model" class="normal" placeholder="Modelo del producto" <%= locals.errors && errors.model ? 'is-invalid' : null %>
            value="<%= locals.oldData ? oldData.model : null %>"
        >
        <% if (locals.errors && errors.model) { %>
            <div class="text-danger">
                <%= errors.model.msg %> 
            </div>
        <% } %>
            <br>

            <h3>Subi una foto de tu producto</h3>
            <input type="file" id="image" class="normal" name="image" <%= locals.errors && errors.image ? 'is-invalid' : null %>
            >
            <ul id="ulImage" class="error"></ul>
            <% if (locals.errors && errors.image) { %>
                <div class="text-danger">
                    <%= errors.image.msg %>
                </div>
            <% } %>
            <br>


            <div class="category">
                <select name="category_id" id="category" required class="normal">
                    <option value="" disabled selected>- Seleccione una Categoria - </option>
                    <% allCategory.forEach(category => { %>
                    <option value="<%= category.id %>"><%= category.name %></option>
                    <% }); %>
                </select>
            </div>
                <br><br>
                <h3>Descipción</h3>
                <br><br>
                <textarea name="description"  id="description" class="form-input normal"></textarea>
                <ul id="ulDescription" class="error"></ul>

                <% if (locals.errors && errors.description) { %>
                    <div class="text-danger">
                        <%= errors.description.msg %> 
                    </div>
                <% } %>
            
            <div>
                <button class="botonGuardar" type="submit" value="Guardar">Guardar producto</button>
                
            </div>
        </form>
    </div>
    </main>



      <!-- footer -->
      <%-include ('../partials/footer.ejs') %> 
    <!-- footer -->

    <script src="/js/scriptProductCreate.js"></script>
        

</body>
</html>